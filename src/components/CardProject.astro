---
import Image from './Contentful/Image.astro';
import Text from './Text.astro';

interface ProjectLogo {
  title?: string;
  src?: string;
}

interface ProjectData {
  logo?: unknown;
  theme?: string;
  name?: string;
  logos?: ProjectLogo[];
}

interface Props {
  project: ProjectData;
  href: string;
  class?: string;
}

const { project, href, class: className } = Astro.props as Props;
const { logo, theme, name, logos = [] } = project;
---

<a
  href={href}
  style={`background-color:${theme};`}
  class:list={[
    'relative aspect-square min-h-[220px] group flex h-full w-full items-center justify-center p-6 no-underline',
    className,
  ]}
>
  {
    logo ? (
      <Image data={logo} class="mx-auto max-h-[100px] max-w-[60%]" />
    ) : (
      <Text type="h3" class="text-center">
        {name}
      </Text>
    )
  }

  <div
    class="absolute inset-0 flex flex-col items-center justify-between bg-black/60 p-8 opacity-0 transition-opacity duration-200 group-hover:opacity-100"
  >
    {
      logos.length > 0 && (
        <div class="absolute bottom-4 left-2 right-2 flex flex-wrap justify-center gap-3">
          {logos.map((logoItem) => {
            const src = logoItem?.src;
            if (!src) return null;
            return (
              <img
                src={src.startsWith('http') ? src : `https:${src}`}
                alt={logoItem.title ?? src}
                width="24"
                height="24"
                class="h-6 w-6 object-contain"
                loading="lazy"
                key={src}
              />
            );
          })}
        </div>
      )
    }
  </div>
</a>
